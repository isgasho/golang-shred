#### redis在项目中的应用
- redis 作为缓存

- redis session共享

- redis 分布式锁
redis锁使用setnx实现，流程如下:
1. 加锁: 通过setnx key value  当key不存在时对建操作成功并返回否则返回失败
2. 解锁命令: del key  通过删除key实现对锁资源的释放
3. 锁超时: expire key timeout  锁没有主动释放也可以保证在超时以后进行释放
4. 不可重入
5. 无法等待锁释放  获取锁失败时，订阅锁释放消息，获取锁成功后再释放时发布消息

锁的注意事项
问题: 假设现在有线程A、B. 如果A在执行时超过了expire导致锁被释放，B获得锁以后执行逻辑。如果B还没有执行完A进行了资源释放就会导致锁被误解除了
解决方式: 在删除之前验证key对应的value是否为当前线程持有, 可以生成一个uuid标识当前线程

问题: 超时解锁导致并发 eg: A超时解除锁，B获取锁进行逻辑执行 导致AB并发执行
解决方式: 
1. 将过期时间设置为足够长
2. 为获取锁的线程增加守护进程，为将要过期但未释放的锁增加过期时间

- redis集群部署
一般采用主从方式部署, 主从数据同步分为同步和异步。redis将指令存储在本地的buffer中，然后异步将指令同步到从节点,从节点一边执行同步指令一边反馈同步信息

#### 分布式事务
使用消息队列处理

#### 缓存穿透
缓存与数据库都不存在的数据

#### 缓存击穿
统一数据大量请求

#### 缓存雪崩